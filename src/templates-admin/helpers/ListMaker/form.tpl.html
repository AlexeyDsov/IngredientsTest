<?
$noPostfix = false;
if (!isset($postfix)) {
	$postfix = microtime(true);
	$model->set('postfix', $postfix);
	$noPostfix = true;
}
?>

<form
	class="js-pjax"
	id="listForm<?=$postfix?>"
	method="GET"
	action="<?=PATH_WEB_URL?>"
>
	<?php
	foreach ($urlParams as $param => $value) {
	?>
		<input type="hidden" name="<?=$param?>" value="<?=$this->escape($value)?>" />
		<?php
	}

	foreach ($propertyList as $propertyName => $options) {
		if (
			isset($options[ListMakerProperties::OPTION_FILTERABLE])
			&& !empty($options[ListMakerProperties::OPTION_FILTERABLE])
		) {
			$model->set('propertyName', $propertyName);
			$partViewer->view('helpers/ListMaker/property');
		}
	}
	$model->drop('propertyName');
	?>
	<input type="submit" value="Search"/>
</form>
<?php
if ($noPostfix) {
	$model->drop('postfix');
}
?>